(function(){"use strict";var e={6066:function(e,n,t){var r=t(9242),o=t(3396);function s(e,n,t,r,s,i){const u=(0,o.up)("NavBlock"),a=(0,o.up)("ChatBlock");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(u),(0,o.Wm)(a)])}const i=(0,o._)("h1",null,[(0,o._)("strong",null,"Vue"),(0,o.Uk)(" Chat App")],-1),u={key:0,class:"login"};function a(e,n,t,r,s,a){const c=(0,o.up)("AvatarBlock");return(0,o.wg)(),(0,o.iD)("nav",null,[(0,o._)("div",null,[i,r.isLogin?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(c,{src:r.user.photoURL},null,8,["src"]),(0,o._)("button",{class:"text-gray-400 hover:text-white",onClick:n[0]||(n[0]=(...e)=>r.signOut&&r.signOut(...e))}," Sign Out ")])):((0,o.wg)(),(0,o.iD)("button",{key:1,class:"bg-green-500 hover:bg-green-600",onClick:n[1]||(n[1]=(...e)=>r.signIn&&r.signIn(...e))}," Sign in "))])])}const c=["src"];function l(e,n,t,r,s,i){return(0,o.wg)(),(0,o.iD)("img",{class:"avatar",src:t.src},null,8,c)}var g={props:{src:{type:String,default:""}}},d=t(89);const p=(0,d.Z)(g,[["render",l]]);var v=p,f=t(6780),m=(t(450),t(4406),t(4937)),h=t.n(m),w=t(4870);f.Z.initializeApp({apiKey:"AIzaSyCp7mhwUSZ6uwULE_gN8qxnEI3ljj5nATg",authDomain:"vue3-chat-533a6.firebaseapp.com",projectId:"vue3-chat-533a6",storageBucket:"vue3-chat-533a6.appspot.com",messagingSenderId:"151147414767",appId:"1:151147414767:web:9519716e4a5725a39f471a"});const b=f.Z.auth();function y(){const e=(0,w.iH)(null),n=b.onAuthStateChanged((n=>e.value=n));(0,o.Ah)(n);const t=(0,o.Fl)((()=>null!==e.value)),r=async()=>{const e=new f.Z.auth.GoogleAuthProvider;await b.signInWithPopup(e)},s=()=>b.signOut();return{user:e,isLogin:t,signIn:r,signOut:s}}const k=f.Z.firestore(),_=k.collection("messages"),O=_.orderBy("createdAt","desc").limit(100),S=new(h());function x(){const e=(0,w.iH)([]),n=O.onSnapshot((n=>{e.value=n.docs.map((e=>({id:e.id,...e.data()}))).reverse()}));(0,o.Ah)(n);const{user:t,isLogin:r}=y(),s=e=>{if(!r.value)return;const{photoURL:n,uid:o,displayName:s}=t.value;_.add({userName:s,userId:o,userPhotoURL:n,text:S.clean(e),createdAt:f.Z.firestore.FieldValue.serverTimestamp()})};return{messages:e,sendMessage:s}}var I={components:{AvatarBlock:v},setup(){const{user:e,isLogin:n,signOut:t,signIn:r}=y();return{user:e,isLogin:n,signOut:t,signIn:r}}};const L=(0,d.Z)(I,[["render",a]]);var B=L,A=t(7139);const C={class:"container-sm mt-20"},j={class:"mx-5"},D={ref:"bottom",class:"mt-20"},Z={class:"bottom"},U={class:"container-sm"},M={type:"submit"};function P(e,n,t,s,i,u){const a=(0,o.up)("MessageBlock"),c=(0,o.up)("SendIconBlock");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",C,[(0,o._)("div",j,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.messages,(({id:e,text:n,userPhotoURL:t,userName:r,userId:i})=>((0,o.wg)(),(0,o.j4)(a,{key:e,name:r,"photo-url":t,sender:i===s.user?.uid},{default:(0,o.w5)((()=>[(0,o.Uk)((0,A.zw)(n),1)])),_:2},1032,["name","photo-url","sender"])))),128))])]),(0,o._)("div",D,null,512),(0,o._)("div",Z,[(0,o._)("div",U,[s.isLogin?((0,o.wg)(),(0,o.iD)("form",{key:0,onSubmit:n[1]||(n[1]=(0,r.iM)(((...e)=>s.send&&s.send(...e)),["prevent"]))},[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>s.message=e),placeholder:"Message",required:""},null,512),[[r.nr,s.message]]),(0,o._)("button",M,[(0,o.Wm)(c)])],32)):(0,o.kq)("",!0)])])],64)}const W={class:"icon-send hover:text-green-500 hover:text-green-500","aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},H=(0,o._)("path",{fill:"currentColor",d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},null,-1),N=[H];function T(e,n){return(0,o.wg)(),(0,o.iD)("svg",W,N)}const z={},q=(0,d.Z)(z,[["render",T]]);var R=q;const V={class:"message"},Y={key:0};function E(e,n,t,r,s,i){const u=(0,o.up)("AvatarBlock");return(0,o.wg)(),(0,o.iD)("div",V,[t.sender?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",Y,(0,A.zw)(t.name),1)),(0,o._)("div",{class:(0,A.C_)(["flex",t.sender?"flex-row-reverse":""])},[(0,o.Wm)(u,{class:"mt-1",src:t.photoUrl},null,8,["src"]),(0,o._)("div",{class:(0,A.C_)(["text w-3/4",t.sender?"bg-green-800":"bg-gray-700"])},[(0,o.WI)(e.$slots,"default")],2)],2)])}var F={components:{AvatarBlock:v},props:{name:{type:String,default:""},photoUrl:{type:String,default:""},sender:{type:Boolean,default:!1}}};const K=(0,d.Z)(F,[["render",E]]);var G=K,$={components:{MessageBlock:G,SendIconBlock:R},setup(){const{user:e,isLogin:n}=y(),{messages:t,sendMessage:r}=x(),s=(0,w.iH)(null);(0,o.YP)(t,(()=>{(0,o.Y3)((()=>{s.value?.scrollIntoView({behavior:"smooth"})}))}),{deep:!0});const i=(0,w.iH)(""),u=()=>{r(i.value),i.value=""};return{user:e,isLogin:n,messages:t,bottom:s,message:i,send:u}}};const J=(0,d.Z)($,[["render",P]]);var Q=J,X={name:"App",components:{NavBlock:B,ChatBlock:Q}};const ee=(0,d.Z)(X,[["render",s]]);var ne=ee;(0,r.ri)(ne).mount("#app")}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var s=n[r]={exports:{}};return e[r](s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(n,r,o,s){if(!r){var i=1/0;for(l=0;l<e.length;l++){r=e[l][0],o=e[l][1],s=e[l][2];for(var u=!0,a=0;a<r.length;a++)(!1&s||i>=s)&&Object.keys(t.O).every((function(e){return t.O[e](r[a])}))?r.splice(a--,1):(u=!1,s<i&&(i=s));if(u){e.splice(l--,1);var c=o();void 0!==c&&(n=c)}}return n}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[r,o,s]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,r){var o,s,i=r[0],u=r[1],a=r[2],c=0;if(i.some((function(n){return 0!==e[n]}))){for(o in u)t.o(u,o)&&(t.m[o]=u[o]);if(a)var l=a(t)}for(n&&n(r);c<i.length;c++)s=i[c],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(l)},r=self["webpackChunkvue3chat"]=self["webpackChunkvue3chat"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(6066)}));r=t.O(r)})();
//# sourceMappingURL=app.6d878cdc.js.map